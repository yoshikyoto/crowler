<presentation language="ja">
<slide page="1">
<body>
<p>
第３回 画像入力処理
</p>
</body>
</slide>
<slide page="2">
<body>
<p>
入力処理(Input Process)
• 実世界の3次元シーンやすでに存在する書類などからデジタ
ル画像を生成する処理
</p>
</body>
</slide>
<slide page="3">
<body>
<p>
入力デバイスの例
• ２次元画像のための典型的な入力デバイス
– スキャナ
</p>
</body>
</slide>
<slide page="4">
<body>
<p>
２次元実世界からの画像入力
-濃淡画像(アナログとデジタル)-
• 濃淡画像
– 平面座標系で定義される2変数関数
• アナログ画像（連続的）
• デジタル画像（離散的）
– 実世界の濃淡画像をデジタル画像に変換
• 二次元平面座標の離散化（サンプリング）
• 画素値の離散化（量子化）
Rzyx
yxfz
∈
=
,,
),(
表す実数受光部での光の強さを
：平面上の任意の位置
:
,
z
yx
ZZYX
YXFZ
ji
ji
∈
=
,,
),(
画素値
：座標値
:Z
, ji YX
</p>
</body>
</slide>
<slide page="5">
<body>
<p>
標本化・解像度・量子化
• 標本化（sampling）
– ピクセルに切り分けること
• 解像度(resolution)
– 標本化の間隔をlとすると、切り分けのキメの細かさ(1/l)
i=0, j=0を原点、x, y軸をそれぞれ正の方向に間隔lx, lyでサンプリ
ング点が並んでいるとすると、配列(i, j)の座標値は
• 量子化(quantization)
– 濃淡値を（例えば、０から２５５までの）離散値にすること
yjxi jlYilX == ,
</p>
</body>
</slide>
<slide page="6">
<body>
<p>
サンプリングと量子化の概念
プロファイル
</p>
</body>
</slide>
<slide page="7">
<body>
<p>
標本化
• 二次元画像（アナログ）をどの程度の細かさ（解
像度）でデジタル画像に変換するか
–標本化を細かくする
• ディジタル画像の質が向上、データ量は増加
–どの程度細かくすれば元の画像の情報量が保存で
きるか？
滑らかさの異なる画像
</p>
</body>
</slide>
<slide page="8">
<body>
<p>
空間周波数
• 空間周波数：画像での周波数
–長さと画像の明るさの関係を表した関数
– この関数に周波数（空間周波数）、周期の概念を
定義
–空間周波数成分は複素数であるのでそのパワー
スペクトルを画像として表現
</p>
</body>
</slide>
<slide page="9">
<body>
<p>
パワースペクトル画像の性質
• 空間周波数成分濃淡画像として表現
–中心部に低周波成分
–周囲にそれぞれの方向の高周波成分が配置
–成分が大きいほど輝度が高くなる
–位相を考えない場合は第1象限のみで十分
</p>
</body>
</slide>
<slide page="10">
<body>
<p>
パワースペクトル画像
</p>
</body>
</slide>
<slide page="11">
<body>
<p>
サンプリング定理
• ある画像が与えられたとき
– どのような細かさでサンプリングすればよいかを決めるた
めの定理
• 直感的に考えると
– 周波数が高い：細かいサンプリングが必要
– 周波数が低い：粗くてもよい
• 対象とする画像の周波数成分によって、必要なサン
プリング間隔が異なる
– 画像に含まれる最高周波数W
– サンプリング間隔 １／２W
</p>
</body>
</slide>
<slide page="12">
<body>
<p>
１次元のサンプリング定理
.
)sin()()(
)(),(
)(
)(,0)(ˆ
)(
)]([)(ˆ
)(),(,
と表現できる
をもとに、
の値は、離散的な点でのとする．このとき関数
に対して、数い、すなわちある周波が高周波成分を持たなとすると、
のををフーリエ変換したもとする．関数を周波数を変数
π
ππ
π
ω
ω
ωω
nWt
nWt
W
nftf
Zn
W
nf
ftf
Wwf
Wtf
tff
tfRtt
n −
−=
∈
>=
=
∈
∑∞
−∞=
F
</p>
</body>
</slide>
<slide page="13">
<body>
<p>
.
2
2)(
.)(ˆ
2
1
)(ˆ
2
1)(
)(ˆ
)(ˆ
2
1
)(ˆ
0)(ˆ
2
2
2
2
WW
nfd
def
deftf
f
ef
W
d
edf
Wf
n
tjW
W
tj
W
jnW
Wn
n
W
jn
n
ππ
ωωπ
ωωπ
ω
ω
ω
ωω
ω
ω
ωπ
ωπ
−=
=
=
=
=
>
∫
∫
∫
∑
−
∞
∞−
−
−
∞
−∞=
較すると上のフーリエ係数を比
　　　
とをフーリエ逆変換するである．
ここでフーリエ級数は
級数展開ができる．であるので、フーリエでは
</p>
</body>
</slide>
<slide page="14">
<body>
<p>
π
ππ
π
ππ
ωπ
ωπ
ωπππ
πω
ω
ωπ
ω
ωπ
nWt
nWt
W
nf
nWt
nWtW
W
nf
W
de
W
nf
W
dee
W
nf
W
dee
WW
nftf
n
n
W
W
t
W
nj
n
W
W
tjW
jn
n
W
W
tjW
jn
n
+
+−=
+
+−=
−=
−=
−=
∑
∑
∫∑
∫∑
∫ ∑
∞
−∞=
∞
−∞=
−
+∞
−∞=
−
∞
−∞=
−
∞
−∞=
)sin()(
)sin(2)(
2
1
)(
2
1
)(
2
1
2
2)(
2
1)(
)
2
2(
2
2
2
2
すればこれをフーリエ逆変換
</p>
</body>
</slide>
<slide page="15">
<body>
<p>
量子化モデル
• ディジタル画像の各画素における画素値の
階調数をどう決めるか？
–階調数を何段階にするか？
• サンプリング定理のような定理がない
–量子化のための代表値をどの値に設定するか？
• 画像の濃淡分布が分かっている場合、最適化手法に
より代表値を決定
</p>
</body>
</slide>
<slide page="16">
<body>
<p>
ヒストグラム（頻度分布）
• アナログ画像のとり得る値の範囲がzmin < z < zmaxのとき
によって、区間に分割される
• ヒストグラムは、画像中の画素値を横軸に，画素値が
である画素の数（頻度(frequency)）を縦軸にプロットしたもの
Kk ZzZzZ <<<<<≤ maxmin0 ......
)1,...,0(1 −=<≤ + KkZzZ kK
</p>
</body>
</slide>
<slide page="17">
<body>
<p>
最適化手法により代表値の決定
各画素でアナログ値z が得られた
とき、その区間の代表値qkを求める
)( 1+<≤ kK ZzZ
理論的には、画像中の画素値zは、何らかの確率分布p(z)に従うと仮定
</p>
</body>
</slide>
<slide page="18">
<body>
<p>
最適化手法により代表値の決定
[ ]であるときの代表値を持ち、境界値が分布がこれが、画素値の確率
られる．よって、以下の式が得
で偏微分すれば、を
になる．で偏微分すればら、上式を最小値は極値であるか
を決定り量子化の代表値を最小化することによ
の期待値との２乗誤差アナログ値
1
22
2
1
0
22
2
,)(
)(
)(
0)()(2
)()(
0
)1,...,0(
)()(
)(
1
1
1
1
1
+
−
=
∫
∫
∫∫
∑∫
+
+
+
+
+
=
=−=∂
−∂
=∂
∂
−
−=
−
kk
Z
Z
Z
Z
k
Z
Z k
k
Z
Z k
k
q
kq
k
k
K
k
Z
Z kq
k
ZZzp
dzzp
dzzzp
q
dzzpzq
q
dzzpqz
q
q
q
Kq
dzzpqz
qzz
k
k
k
k
k
k
k
k
k
k
δ
δ
δ
</p>
</body>
</slide>
<slide page="19">
<body>
<p>
解像度と量子化の関係
• 入力画像の特性に依存
–高周波成分が多い場合
• 量子化を細かくするより解像度を高くするほうがよい
–低周波成分が多い場合
• 解像度を高くするより量子化を細かくするほうがよい
</p>
</body>
</slide>
<slide page="20">
<body>
<p>
解像度と量子化の関係
</p>
</body>
</slide>
<slide page="21">
<body>
<p>
３次元シーンからの画像入力
• 次元を3次元から2次元に変換
–投影モデル(projection model) 
–反射モデル(reflection model)
–典型的な入力デバイス
• デジタルカメラ
カメラ内部
</p>
</body>
</slide>
<slide page="22">
<body>
<p>
投影モデル
• ３次元世界を２次世界に変換する
典型的な手法
– 平行投影モデル(Parallel Projection 
Model)
• 平行光源を設定
• 失われた次元情報が一切残っていない
– 透視投影モデル(Perspective 
Projection Model)
• 点光源を設定
• カメラから対象までの距離情報を部分的
に持っている
平行投影モデル
透視投影モデル
</p>
</body>
</slide>
<slide page="23">
<body>
<p>
ピンホールカメラ
• 対象物体の表面の１点が,CCDの１点に対応
するように各部に届く光を制限したもの
</p>
</body>
</slide>
<slide page="24">
<body>
<p>
ピンホールカメラによるシーンの撮影
Z
Yfy
Z
Xfx
=
=
• 画像平面の画像座標系を(x, y),この座標系の原点(0, 0)から
垂直方向に距離ｆ にピンホールのあいたスクリーンを設置．
• 世界座標系( X,Y,Z)を,このピンホール位置を原点
• X軸Y軸をそれぞれx軸 y軸に平行、Z軸を x- y平面に垂直な
方向にとる
• 世界座標系での3次元座標(X,Y,Z)の点はピンホールを通して
画像平面上の1点(x, y)に投影されるとき、座標間には、下の
ような関係が成立
ｆ ：焦点距離
世界座標系と画像座標系
</p>
</body>
</slide>
<slide page="25">
<body>
<p>
反射モデル
• 光の反射モデル
–鏡面反射(specular reflection）
• これら3つのベクトルが同一
平面上にあり， lと nの角度と
n と eの角度が等しい場合の
み観測
–拡散反射(diffuse reflection)
• 全ての方向から観測され、そ
の明るさは lと eの角度に
よってのみ変化
物体の着目している点から見て，
l :光源の方向，
n :面の法線方向
e :視点の方向
をそれぞれ示している．
</p>
</body>
</slide>
<slide page="26">
<body>
<p>
画像フォーマット
• ２次元配列で表現
– デジタルデータの保存の際は、シーケンシャルな１次元
• ２次元配列を再構成
– 画像（配列）の大きさなどを知る必要がある
• 画像フォーマット
– 画像の構成について記述されたヘッダ部分（画像の幅、高さ、１ピクセルあた
りのデータ量）
– ピクセル値が納められている本体部分
</p>
</body>
</slide>
</presentation>
