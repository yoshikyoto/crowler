<presentation language="ja">
<slide page="1">
<body>
<p>
出力処理
</p>
</body>
</slide>
<slide page="2">
<body>
<p>
画像出力処理
• 出力処理
–デジタル画像を人間が目に見える形態に変換するこ
と
• 出力デバイス
–プリンタ
–ディスプレイ
</p>
</body>
</slide>
<slide page="3">
<body>
<p>
出力デバイス
• ディスプレイ
–直接的に情報を表示
–一時的な情報の提示
–動画像も表示可能
• プリンタ
–紙媒体に情報を提示
–長期的な情報提示が可能
–静止画像のみ表示
</p>
</body>
</slide>
<slide page="4">
<body>
<p>
ディスプレイ
• ディスプレイ
–計算機からの制御により直接的に情報を表示
• ディスプレイの種類
– CRTディスプレイ（CRT)
–液晶ディスプレイ （LCD)
–プラズマディスプレイ（PDP)
</p>
</body>
</slide>
<slide page="5">
<body>
<p>
プリンタ
• プリンタ
– デジタル画像を実世界の２次元画像として紙に記録
• プリンタの種類
– インパクトプリンタ
• インクリボンに機械的に活字を衝突させて紙に印字するもの
– ノンインパクトプリンタ
• 熱転写式プリンタ
– インクリボンを加熱することで，記録紙にインクを転写
• インクジェット式プリンタ
– ノズルからインクを噴射して印刷
• レーザープリンタ
</p>
</body>
</slide>
<slide page="6">
<body>
<p>
レーザープリンタの原理
• 感光ドラム(drum)をあらかじめ帯電（マイナスかプラス）
• 感光ドラムは光を当てることで見かけ上プラスに帯電
• レーザー光を回転する多面鏡に照射し，その回転に伴ってドラム上をスキャンしイメー
ジを描画
• レーザを画像情報に従ってON-OFFすることにより感光ドラム上には，マイナスに帯電
した部分と，レーザーで描画されたことによりプラスに帯電した部分とに分かれる．
• トナーと呼ばれる細かい炭素の粉末をマイナスに帯電させて接着させ印刷用紙に転写
• 最後に熱と圧力を加えて紙に定着させることで印刷
</p>
</body>
</slide>
<slide page="7">
<body>
<p>
疑似濃淡表現
• 擬似濃淡表示法(digital halftoning，pseudo 
continuous tone) 
–人間の眼の解像度には限界
• 余り微細なものは見えないこと
• 局所的な濃淡は平均化し，滑らかにする
機能があることを利用
• 手法
– ドットパターン法(dot pattern method) 
–ディザ法(dither method) 
</p>
</body>
</slide>
<slide page="8">
<body>
<p>
ドットパターン法
• 濃淡画像の１画素を２値画像の複数画素（ドット）で表現
• ドットのある点（黒）と無い点（白）の面積比で灰色を表現
– 例えば n×nの正方形の２値画像ならば， 0からn2の階調を実現
– 2×2の画素で濃度0の点が
の順で１になることで５段階の階調が実現
３ １
２ ４
</p>
</body>
</slide>
<slide page="9">
<body>
<p>
擬似輪郭(contour) 
• 擬似輪郭
– 階調が５段階しか無いため，階調が変化するところで急激な変化があ
り，あたかも輪郭があるかのように見える
– nの値が大きくなれば，同じ階調数でも，階調によってどのような順番
でドットを配列するかによって２値画像の印象が異なる．
– ドット分散型
• ブロック内でドットが隣り合わないよう分散して配置
– ドット集中型
• 集中させて配置
2x2のドットパターンによる表現
</p>
</body>
</slide>
<slide page="10">
<body>
<p>
ドット分散型とドット集中型
• ドット分散型ではベイヤー(Bayer)型とドット集中型では網点
（あみてん）型が代表的なもの
– ドットの配置順に番号を振ると
• 解像力はドット分散型が優れ，階調のリニアな表現はドット
集中型が優れている
ドット集中型 網点型
</p>
</body>
</slide>
<slide page="11">
<body>
<p>
ドット分散型とドット集中型
• ドットパターン法では階調数を増やそうとすればする
程，濃淡画像の画素を表現するための２値画像の
画素数が多くなる
• 濃淡画像をドットパターン法で表すためには画像の
サイズが大きくなる
ドット分散型とドット集中型
</p>
</body>
</slide>
<slide page="12">
<body>
<p>
ディザ法
• ディザ法
– 座標(x ,y)での画素値F (x ,y )に対し閾値（しきいち） T(x, y)を設定
– 画素値を閾値と比較することによって２値化する擬似濃淡表示手法
– もし一つの閾値を全体の画像に当てはめると，濃淡と言うより白色と黒色の部分から構成され
る画像となってしまう
– 閾値を変動させすることで濃淡を表現
– 閾値変動させるときに２つの手法
• 周辺画素の濃度を考慮せずに２値化対象の画素の閾値を決定する独立閾値決定法
• 周辺画素の濃度を考慮して決定する条件付き閾値決定法
⎭⎬
⎫
⎩⎨
⎧
<
≥=
),(),(,0
),(),(,1
),(
yxTyxF
yxTyxF
yxG
単純2値化
</p>
</body>
</slide>
<slide page="13">
<body>
<p>
• 独立閾値決定法
– ランダムディザ法(random dither method) 
• 外部から一様乱数という擾乱を与えることで濃淡表現が可能
– 組織ディザ法(ordered dither method)
• 画像を小ブロックに分割し，各ブロック毎にブロックと同じサイズのディザ
行列と呼ばれる閾値行列と比較することで２値化
• 条件付き閾値決定法
– 平均値制限法(limit the mean value)
• 着目している画素の近傍の画素の濃度によって，２値化の閾値を決定
– 平均誤差最小法(minimized average error)
• 近傍画素を2値化したときの値との2値化前の値との誤差をもとに閾値を
決定
– 誤差拡散法(error diffusion method)
• 注目点の誤差を周囲の画素の濃度に反映
独立閾値決定法と
条件付き閾値決定法
</p>
</body>
</slide>
<slide page="14">
<body>
<p>
独立閾値決定法
-ランダムディザ法-
• 階調数をKとし,0,…,K-1の整数値をとるとする．
• 各画素の閾値T( x, y)を一様乱数で決定
• このとき，ある画素の閾値がTである確率をP(T) とすると，
• 画素( x, y )の濃度がF ( x, y )であるとき，２値化されたとき，実際にピクセルがとる値
は0か1であるが，その期待値は
• よって多くの画素数がある画像では統計的に濃淡画像が構成出来る．
'
1)),((
K
yxTP =
ランダムディザ
K
yxF
KK
K
yxFZ
yxF
Z
1),(
1
1011
1
1),(
),(
0
+=×+× ∑∑ −
+==
</p>
</body>
</slide>
<slide page="15">
<body>
<p>
独立閾値決定法
-組織ディザ法-
• ランダムディザ法では，注目する１つ１つの画素の閾値を乱数によって決定
• 組織ディザ法では，画像を小ブロックに分割し，各ブロック毎にブロックと同じサイ
ズのディザ行列と呼ばれる閾値行列と比較することで２値化
ベイヤー (Bayer)型の 2n×2nディザ行列は
で定義．全ての値が1である 2n×2nの正方行列を
とおくと， 2n×2nのディザ行列は再帰的に
で定義
⎟⎟⎠
⎞
⎜⎜⎝
⎛=
13
20
2D
⎟⎟
⎟
⎠
⎞
⎜⎜
⎜
⎝
⎛
=
11
11
2
L
MOM
L
nP
⎟⎟⎠
⎞
⎜⎜⎝
⎛
++
++=
−−−−
−−−−
)1()1()1()1(
)1()1()1()1(
2222
2222
2 1434
2404
nnnn
nnnn
n PDPD
PDPD
D
</p>
</body>
</slide>
<slide page="16">
<body>
<p>
独立閾値決定法
-組織ディザ法-
D4の場合、ディザ行列は
これにより 4×4+1=１７の段階に分けることができ，階調が0から255ならば，閾値は
⎟⎟
⎟⎟
⎟
⎠
⎞
⎜⎜
⎜⎜
⎜
⎝
⎛
=
513715
91113
614412
10280
4D
⎟⎟
⎟⎟
⎟
⎠
⎞
⎜⎜
⎜⎜
⎜
⎝
⎛
90210120240
1503018060
10522575195
1654513515
</p>
</body>
</slide>
<slide page="17">
<body>
<p>
独立閾値決定法
-組織ディザ法-
ドットパターン法と同様に網点型の
ディザ行列も定義できる
⎟⎟
⎟⎟
⎟
⎠
⎞
⎜⎜
⎜⎜
⎜
⎝
⎛
11964
311315
75108
121420
</p>
</body>
</slide>
<slide page="18">
<body>
<p>
条件付き閾値決定法
-平均値制限法-
• もともと画像が持っているランダム性を利用
– 座標( x, y )周辺3×3の濃度の平均値を
– このとき閾値を
ここでγは0 ≦γ≦0.5の定数で，その値によって生成される画像の性質が変化
γ =0.5の場合は第１項のみが残り，一定の閾値T(x, y) =0.5(K-1)での２値化
γ= 0のときは，周辺と比較した濃度の差によって２値画像の画素値が決定されるので
ある意味で輪郭を強調する効果
0 < γ< 0.5 では，固定閾値γ(K - 1)による効果と，注目している画素の濃度とその周
辺部の違いの強調効果の組み合わせで濃淡を生む．実際には0<γ<0.1 であることが
多い．
この手法は，濃淡画像の持っている，濃淡のぶれをもとにしているので，一様に変化を
している画像には適用出来ない．
∑
−=
++=
1
1,
),(
9
1),(
ji
jyixFyxM
),()21()1(),( yxMKyxT γγ −+−=
</p>
</body>
</slide>
<slide page="19">
<body>
<p>
条件付き閾値決定法
-平均値制限法-
</p>
</body>
</slide>
<slide page="20">
<body>
<p>
条件付き閾値決定法
-平均誤差最小法-
• 近傍画素を2値化したときの値との2値化前の値との誤差
をもとに閾値を決定
• ２値化したい画像をF(x, y)とし，各画素がとる濃度が0か
らL-1であるとする．濃度値を正規化し f(x,y)=F(x,y)/(L-1)
と置けば，0 ≦ f(x,y) ≦ 1 となる．ここで2値化したときの
画像を G(x,y)とすれば，誤差は
と定義
),(),(),( yxGyxfyxerr −=
</p>
</body>
</slide>
<slide page="21">
<body>
<p>
条件付き閾値決定法
-平均誤差最小法-
• 処理は一般的には画像の左上から水平方向に画素単位
• 一行の処理が終わると次の行の処理を始め，これを繰り返して右
下の画素で終了
• このように２次元画像の画素を一次元に並べる方法をラスタスキャ
ン操作
• 着目する画素に対して，このとき基本の閾値を１/2 とすれば，その
周囲で既に2値化が済んでいる画像の誤差を計算
• 誤差を打ち消すように着目画素の閾値を変更
</p>
</body>
</slide>
<slide page="22">
<body>
<p>
条件付き閾値決定法
-平均誤差最小法-
ここで αk,lは誤差を反映させるための近傍の重みで
あり，
が一般的である．* は注目画素であり，-は値が無いこと
を示す．
ラスタ操作左上から右下へと処理は進むので，上方と左
は重みがつくが，注目画素の右と下は値を持たない
平均誤差最小法と誤差拡散法での
ラスタスキャン
∑
∑
∈
∈ +++=
Neighborlk lk
Neighborlk lk
lykxerr
yxT
, ,
, ,
),(
2
1),( α
α
</p>
</body>
</slide>
<slide page="23">
<body>
<p>
条件付き閾値決定法
-平均誤差最小法-
</p>
</body>
</slide>
<slide page="24">
<body>
<p>
条件付き閾値決定法
-誤差拡散法-
• 誤差拡散法では注目点の誤差を周囲の画素の濃
度に反映
• 平均誤差最小法の時と同じように正規化された濃
度f(x,y) ，2値化したときの画像をG(x,y) とすれば，
誤差は
),(),(),( yxGyxfyxerr −=
</p>
</body>
</slide>
<slide page="25">
<body>
<p>
条件付き閾値決定法
-誤差拡散法-
• 誤差拡散法では誤差は次々に近傍画素に引き継がれ拡散
• これにより画像全体として補正する働きが生じる．
• カップの画像を例にとるとオリジナル画像での濃度の画像全体の
総和はΣx,y f(x,y)=31908.1に対し，
– 平均誤差最小法での濃度の総和は ，Σx,y f(x,y)=33141
– 誤差拡散法ではΣx,y f(x,y)=31908
• 誤差拡散法では、画像全体として濃度値の総和が保たれ良好な結果が得ら
れる．
</p>
</body>
</slide>
<slide page="26">
<body>
<p>
条件付き閾値決定法
-誤差拡散法-
• 誤差拡散法では誤差を画素の濃度値の変更に用いるので閾値は
T(X,Y)=1/2で固定しておけばよい．
• ラスタスキャンを行って2値化をしてゆくとき，これまでの誤差分をこれから
処理する周囲の画素に割り振って濃度の値を変更
ここでαk,lは誤差を反映させるための近傍の重みであり，
が一般的である．ここで * は注目画素であり，-は値が無いことを示す．
∑ ∈
+++++→++
Neighborlk lk
lk lykxerrlykxflykxf
, ,
, ),(),(),( α
α
</p>
</body>
</slide>
<slide page="27">
<body>
<p>
色表現
• 光の色
–物理的にはその波長のみで定まる一次元の量
• 人間の感覚
–目の網膜にある錐体と呼ばれる視細胞が３種類
存在
• それぞれが光の波長にして570nm(R), 535nm(G), 
445nm(B)の光に最も強く反応
• 色を表現する方法（これを表色系と呼ぶ）
–基本となる三原色が存在
</p>
</body>
</slide>
<slide page="28">
<body>
<p>
ディスプレイの色表現
• ディスプレイでの色表現の基礎
– RGB表色系（図a)
– 加法混色(additive color process)
• ディスプレイではRGB三色の色を発光し，これの混合で色を表現(図b)
• RGBが最高の値で混合された色は各色が加算されたものとして白
– 色はそれぞれの成分の強度(R,G ,B)で表現．
– 例えば，RGBそれぞれが0から255の階調を持つならば，
256×256×256=16777216色の表現が可能
– 特に R= G= Bのとき0から255で黒から，灰色，そして白．
</p>
</body>
</slide>
<slide page="29">
<body>
<p>
プリンタでの色表現
• プリンタで出力された紙媒体
– 外部の光源から入ってくる光を反射することによって色を表現
– 色表現の基礎となるのがCMY表色系
– 白色の光が印刷物に投射されると，そこに塗布されたインクによって、
例えばシアンのインクであればRGBの光のうちR成分が吸収され，G
とBが反射する．これにより，色としてはシアンとなって見える
• 減法混色(subtractive color process)
– 三原色は白からRが減色されたシアン（C），Gが減色されたマゼンタ
（M），Bが減色された黄（Y）
– この意味でRに対してCを補色と言う．
</p>
</body>
</slide>
<slide page="30">
<body>
<p>
プリンタでの色表現
• CMY表色系ではCMYの成分の強度(C, M, Y)によって色が定まる．
• 各CMYについて0から255の階調を持つならば， 256×256×256=16777216
色の表現が可能．
• 特に C= M= Yのとき0から255で白から，灰色，そして黒となる．
• 理想的にはCMYを混ぜて黒が出来る筈であるが，実際の印刷ではCMYで黒
を作ってもはっきりとした黒は出しにくい．
• 下色除去(under colorremoval)
– 印刷においては黒Kも加えたCMYK表色系を用いる．
– プリンタにおける白黒印刷に対応すると言う意味合いが大きい．
– CMYK表色系では各色についてCMYKの値は一意には決まらなくなる．
– Kを用いた場合はその分，CMYの量を減らす必要がある
</p>
</body>
</slide>
<slide page="31">
<body>
<p>
RGBとCMYの関係
• RGB
– RGBの３つのパラメータで色を表現
– 各色の階調を0から255までとする．
– これらの３つのパラメータで３次元空間を構成すると考えれば,（0, 0,0）で
ある黒を原点とし（255, 255,255）までの立方体と考えることが出来る．
– このとき，RGBが各軸になる．
• CMY 
– この立方体をちょうどRGBの対角点から眺めたものになる．
– このときの軸はCMYであり，それぞれRGBと方向が逆になっている
• 色はRGBの表現とCMYの表現の間には R+C=G+M=B+Y=255
が成り立つ．
</p>
</body>
</slide>
</presentation>
