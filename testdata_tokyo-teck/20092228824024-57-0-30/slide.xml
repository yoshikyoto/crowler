<presentation language="ja">
<slide page="1">
<body>
<p>
知的画像処理（２） 1
画像の早期処理
</p>
</body>
</slide>
<slide page="2">
<body>
<p>
知的画像処理（２） 2
画像の処理工程
像
画
像
の
識
別
画
像
の
理
解
記
述
画
像
の
観
測
画
像
の
変
換
画
像
の
解
析
画像の表示
画像の学習
</p>
</body>
</slide>
<slide page="3">
<body>
<p>
知的画像処理（２） 3
画像の観測
• 観測対象
写真，図面，3次元物体，シーンなど
• 観測媒体
可視光，赤外線，X線，超音波，レーザ光など
• 観測行程
１．媒体の電気的信号化
２．信号の画像化
標本化・量子化（ディジタル化）
</p>
</body>
</slide>
<slide page="4">
<body>
<p>
知的画像処理（２） 4
( c )
信号値
時間
( a )
信号値
時間
( d )
信号値
ディジタル信号
時間
( b )
アナログ信号
スイッチ制御信号
標本化信号
標本化
量子化
画像観測の原理
</p>
</body>
</slide>
<slide page="5">
<body>
<p>
知的画像処理（２） 5
原画像
４階調
８階調
3階調
６階調
３２階調
2階調
５階調
１６階調
画像の量子化例
</p>
</body>
</slide>
<slide page="6">
<body>
<p>
知的画像処理（２） 6
• 処理概念：処理対象に依存しない処理
• 処理手法の分類
処理目的に着目した分類
ノイズ除去フィルタリング，平滑化フィルタリング
強調フィルタリング，幾何学的補正フィルタリング
ドメインに着目した分類
画像空間フィルタリング
波数空間フィルタリング
手法の線形性に着目した分類
線形フィルタリング
非線形フィルタリング
フィルタリング
画像の早期処理
</p>
</body>
</slide>
<slide page="7">
<body>
<p>
知的画像処理（２） 7
平滑化処理（目的）
• 線形フィルタ方式（手法）
＊近傍画素の線形加重平均
＊回路構成が容易
＊無条件平均化でぼけが発生
• 非線形フィルタ方式(手法）
＊目的別の個別的な演算を定義
＊線形フィルタよりも柔軟性大
＊ボケを抑制した平滑化等に有効
＊処理時間の増大，経験的調整が必要
</p>
</body>
</slide>
<slide page="8">
<body>
<p>
知的画像処理（２） 8
線形フィルタ平滑化
• 近傍領域での加重平均
• 重みをマスクパターンとして表現
• （例）
1
9
1
9
1
9
1
9
1
9
1
9
1
9
1
9
1
9
1
8
1
8
1
8 0
00
0
1
8
4
8
単純平均 加重平均
（手法・目的）
</p>
</body>
</slide>
<slide page="9">
<body>
<p>
知的画像処理（２） 9
非線形ランクフィルタ平滑化
28  57  46
30  63  60
34  42  25
25 28 30 34 42 46 57 60 63
28  57  46
30  63  60
34  42  25
42
並べ替え
３ｘ３ メディアンフィルタ
入力画像 出力画像
最大値，最小値，中間値(メディアン)等のフィルタ
（例）
i
j j
i
（手法・目的）
</p>
</body>
</slide>
<slide page="10">
<body>
<p>
知的画像処理（２） 10
選択的局所非線形平滑化
(i,j)
9
51
3
42
7
8
6
注目点
•9種類の局所的領域（下図）
•各領域の画素の分散を計算
•すべての領域が閾値以下で，注目点を平均化
（エッジの存在を確認）
（手法・目的）
</p>
</body>
</slide>
<slide page="11">
<body>
<p>
知的画像処理（２） 11
Minフィルタ Maxフィルタ原画像
原画像 Medianフィルタ
非線形フィルタ処理例
</p>
</body>
</slide>
<slide page="12">
<body>
<p>
知的画像処理（２） 12
画像強調(目的）
• 濃度勾配を利用したエッジ強調(手法）
⎟⎟⎠
⎞
⎜⎜⎝
⎛
∂
∂
∂
∂=
⎟⎟⎠
⎞
⎜⎜⎝
⎛
∂
∂+⎟⎠
⎞⎜⎝
⎛
∂
∂=
∂
∂+∂
∂=∇
−
x
yxf
y
yxfyx
y
yxf
x
yxfyxm
y
yxf
x
yxfyxf
),(/),(tan),(
),(),(),(
),(),(),(
1
22
θ
ji
原関数
一次導関数
二次導関数
ディジタル画像の微分は？
</p>
</body>
</slide>
<slide page="13">
<body>
<p>
知的画像処理（２） 13
差分処理(手法）
),1(),(),(
)1,(),(),(
jifjif
y
yxfy
jifjif
x
yxfx
−−≈∂
∂≡Δ
−−≈∂
∂≡Δ
•微分演算の差分化（例）
•差分処理のマスク表現
線形フィルタとして構成
‐1 1
xΔ
‐1
1
yΔ
</p>
</body>
</slide>
<slide page="14">
<body>
<p>
知的画像処理（２） 14
1次差分エッジ強調
•近似の仕方により複数の1次差分が存在
•線形フィルタとしてマスク表現
•1次差分フィルタの例
‐1
‐2 2
‐1 10
0
0 1 ‐1 ‐2
2
‐1
1
000
1
Sobelフィルタ
‐1 1
‐1
1
xΔ yΔ xΔ yΔ
（手法・目的）
</p>
</body>
</slide>
<slide page="15">
<body>
<p>
知的画像処理（２） 15
Laplacianエッジ強調
2
2
2
2 ),(),()()(),(
y
yxf
x
yxfffyxf T ∂
∂+∂
∂=∇∇=ℑ
•ラプラシアン演算
•ラプラシアン近似とマスク表現
1
1 1
1 11
‐8
1 1
1 1‐4
10
00 1
0
4近傍2次差分 ８近傍2次差分
(ℑ)
（手法・目的）
</p>
</body>
</slide>
<slide page="16">
<body>
<p>
知的画像処理（２） 16
• 非極値抑制の概要
黒レベル
白レベル
原画像
微分画像
非極値抑制画像
注目点
注目点３ｘ３近傍
エッジ方向
4 0
13 2
5 6 7
非極値抑制エッジ強調法
（手法・目的）
</p>
</body>
</slide>
<slide page="17">
<body>
<p>
知的画像処理（２） 17
原画像
非極値抑制差
分処理
ゾーベル差分
処理
2値化
2値化
非極値抑制差分処理の例
</p>
</body>
</slide>
<slide page="18">
<body>
<p>
知的画像処理（２） 18
ゼロ交差エッジ強調
fGfG ⊗∇=⊗∇ )()( 22
ガウス関数
⎟⎟⎠
⎞
⎜⎜⎝
⎛−−=∇ 2
2
6
22
2
2
exp
2
2
σπσ
σ rrG
注目点からの距離 ｒ
•ガウス関数による平滑化とラプラシアン
ゼロ交差点
⎟⎟⎠
⎞
⎜⎜⎝
⎛−= 2
2
2 2
exp
2
1
σπσ
rG
（手法・目的）
</p>
</body>
</slide>
<slide page="19">
<body>
<p>
知的画像処理（２） 19
Canny法エッジ強調（1/3）
⎟⎟⎠
⎞
⎜⎜⎝
⎛
+
=⎟⎠
⎞⎜⎝
⎛=
⎟⎟⎠
⎞
⎜⎜⎝
⎛
−+
=⎟⎠
⎞⎜⎝
⎛
−=
y
x
yx
v
x
y
yx
u
L
L
LL
e
L
L
LL
e
22
22
1
sin
cos
1
cos
sin
β
β
β
β
),(),(),( yxfyxGyxL ⊗=
),( yxG ：ガウス関数),( yxf ：画像関数
(L   , L   )x yL =grad
u
v
P
β
y
x
空間曲線座標系
（手法・目的）
</p>
</body>
</slide>
<slide page="20">
<body>
<p>
知的画像処理（２） 20
Canny法エッジ強調（2/3）
yxv
yxu
∂⋅+∂⋅=∂
∂⋅−∂⋅=∂
ββ
ββ
sincos
cossin
0
2
22
22
2
2
2
=
+
++=
∂∂
∂=∂
∂=
yyxx
yyyyxxyxxx
vv
LL
LLLLLLL
vv
L
v
LL 代入
エッジ候補点 v方向のゼロ交差点
</p>
</body>
</slide>
<slide page="21">
<body>
<p>
知的画像処理（２） 21
Canny法エッジ強調（3/3）
( a ) ( b ) Pの8近傍点
•ディジタル画像での扱い
0)()( 21 <⋅ PLPL vvvv を満たすPを検出
0
2 1
P
3
4
75 6
エッジ方向勾配(v)方向
８近傍の対の点
のは、と PPP 21
1P
P
2P
</p>
</body>
</slide>
<slide page="22">
<body>
<p>
知的画像処理（２） 22
原画像
σ2 ＝1.0 σ2 ＝2.0 σ2 ＝3.0
σ2 ＝4.0 σ2 ＝8.0 σ2 ＝12.0
Canny法によるエッジ抽出例
</p>
</body>
</slide>
<slide page="23">
<body>
<p>
知的画像処理（２） 23
弛緩法エッジ強調
• エッジの強さと方向に基づく確率的反復法
エッジ集合
エッジラベル集合
{ }naaaA ,...,, 21= { }mλλλ ,...,, 21=Λ
)( uiui Pa λλ を持つ確率：がラベルエッジ
),...,2,1(,1)( niP ui
u
==∑ λ
λ
（手法・目的）
</p>
</body>
</slide>
<slide page="24">
<body>
<p>
知的画像処理（２） 24
{ }
)](),([
]1)[(
]1)[()(
)()(
)()(
)()(
)1(
v
k
jvuij
j
ij
k
i
k
iu
k
i
k
iu
k
i
u
k
i
Pdq
qP
qPP
v
λλλγ
λ
λλ
λ
∑∑
∑
=
+
+=+
•確率の更新（弛緩法）
ラベル間の適合度係数の例
1.0 0.5 0.05 ‐0.15 ‐0.25),( vuij λλγ
vλ
uλ
</p>
</body>
</slide>
<slide page="25">
<body>
<p>
知的画像処理（２） 25
原画像 微分画像
繰返し：1回、閾値：0.7 繰返し：２回、閾値：0.7 繰返し：３回、閾値：0.7
繰返し：４回、閾値：0.7 繰返し：５回、閾値：0.7 繰返し：８回、閾値：0.7
弛緩法によるエッジ強調例
</p>
</body>
</slide>
<slide page="26">
<body>
<p>
知的画像処理（２） 26
濃度強調（目的）
濃度
ヒストグラム
• ヒストグラム正規化処理(手法）
ヒストグラムの濃度分布偏りを修正
• 対数変換処理(処理）
視覚特性に沿った階調化
</p>
</body>
</slide>
<slide page="27">
<body>
<p>
知的画像処理（２） 27
差分
(A-B)
ヒストグラ
ム平滑化
画像A 画像B
ヒストグラム平滑化処理の例
</p>
</body>
</slide>
<slide page="28">
<body>
<p>
知的画像処理（２） 28
参考資料
</p>
</body>
</slide>
<slide page="29">
<body>
<p>
知的画像処理（２） 29
信号処理と画像処理
信号処理系 画像処理系
処理の
応答 実時間性が求められる
ある程度の処理時間
が許容される
記憶域 メモリ容量に対する制限が厳しい
大容量のメモリ使用が
容認され易い
入出力
の流れ
オンラインでの対応
が厳しく求められる
線形性・因果性
オフラインでの対応が
容認され易い
非線形性・非因果性
系の持
つ特徴
</p>
</body>
</slide>
<slide page="30">
<body>
<p>
知的画像処理（２） 30
信号処理システム
)(nx
{ }•T { })()( nxTny =
入力 出力
{ }•T離散システム：
線形システムとは
{ } { } { }　を満たす)()()()( 22112211 nxTanxTanxanxaT +=+
時不変システムとは
{ } を満たす．
がに対する出力入力
であるとき，に対する出力が入力
)()()(
)()()(
)()(
11
11
d
d
nnynxTny
nynnxnx
nynx
−==
−=
</p>
</body>
</slide>
<slide page="31">
<body>
<p>
知的画像処理（２） 31
２次元システム（画像フィルタ）
列画像フィルタマスク配
画像フィルタ
11w 12w
21w
Nw1
1Mw MNw
O
O
L
M
L
M
２次元配列
画像フィルタ出力：
答の２次元インパルス応
ム空間不変な線形システa
1n
2n
16
4
16
1
16
1
16
1
16
1
16
2
16
2
16
2
16
2
16
1
16
1
16
1
16
1
16
4
16
2
16
2
16
2
16
2
２次元インパルス応答 画像フィルタマスク
)1]2/[,1]2/[(),(
1 1
−−+−−+⋅=∑∑
= =
NnjMmixwjiy
M
m
N
n
mn
</p>
</body>
</slide>
<slide page="32">
<body>
<p>
知的画像処理（２） 32
( )( )21 cos23cos2325
1|),(| 21 ωωωω ++=jj eeH
|),(| 21 ωω jj eeH
画像フィルタの特性
25
1
25
1
25
1
25
1
25
9
25
3
25
3
25
3
25
3
加重平均フィルタ
16
1
16
4
16
1
16
1
16
1
16
2
16
2
16
2
16
2
( )( )21 cos22cos2216
1|),(| 21 ωωωω ++=jj eeH 1ω
1ω
2ω
2ω
|),(| 21 ωω jj eeH
</p>
</body>
</slide>
<slide page="33">
<body>
<p>
知的画像処理（２） 33
2次元システム),( yxf { }),(),( yxfOyxg =
}{•O
)},({)},({)},(),({ 22112211 yxfOayxfOayxfayxfaO +=+
ηςηξδηξ ddyxfyxf ),(),(),( −−= ∫ ∫+∞∞− +∞∞−入力：　
)},({),( yxfOyxg =出力：　
を満たす．ここで，
とおく．
２次元線形システム(1/3)
は，線形２次元システムで
</p>
</body>
</slide>
<slide page="34">
<body>
<p>
知的画像処理（２） 34
ηςηξηξ
ηςηξδηξ
ηςηξδηξ
ddyxhf
ddyxOf
ddyxfOyxg
),;,(),(
)},({),(
}),(),({),(
∫ ∫
∫ ∫
∫ ∫
∞+
∞−
∞+
∞−
∞+
∞−
∞+
∞−
∞+
∞−
∞+
∞−
=
−−=
−−=
ると入力を代入して変形す
),(),(),( yxhyxfyxg ⊗=
⎩⎨
⎧ ===−− それ以外のとき
のときただし，
,0
,,1
),(
ηζηξδ yxyx
{ }
を表す．２次元インパルス応答
は，ここで， ),(),;,( ηξδηξ −−= yxOyxh
表す．積分を，右式のように
応答の入力信号とインパルス
（畳込み積分）
２次元線形システム(2/3)
</p>
</body>
</slide>
<slide page="35">
<body>
<p>
知的画像処理（２） 35
離散処理システムでは：
),(),(
),(),(),(
nmhnmf
jnimhjifnmg
i j
⊗=
−−⋅=∑∑
空間不変（space invariant)システム
),;,( ηξyxh のみに依存するとき，と ηξ −− yx
{ } :　・O
ことが可能．
する数・位相）特性を解析システムの応答（周波
インパルス応答
２次元線形システム(3/3)
</p>
</body>
</slide>
<slide page="36">
<body>
<p>
知的画像処理（２） 36
の例２次元系列 ),( nmx
m
n
0
432
1
1
2 3
4
0.1
5.0 3.0
例２次元系列の図式表現
0.1
5.0
3.0
m
n
0
)2,2(3.0
)1,1(5.0
),(1),(
−−×+
−−×+
×=
nm
nm
nmnmx
δ
δ
δ
⎪⎩
⎪⎨
⎧
=−−
=−−
=
3.0)2,2(
5.0)1,1(
0.1),(
nmx
nmx
nmx
２次元系列とその表現
⎩⎨
⎧ ===
−−
)(,0
),(,1
),(
それ以外
ηζ
ηξδ
yx
yx
例２次元系列の数式表現
</p>
</body>
</slide>
<slide page="37">
<body>
<p>
知的画像処理（２） 37
入力系列 次元線形システム2 出力系列
2
m
n
0
2
2
2
2
),( nmx
0.1
5.0
m
n
0
5.0
5.0
),( nmh
3
m
n
0
2
2
4
1
1
1
1
1
4 4
1
),( nmy
),(),( nmhnmf ⊗
２次元システムの入出力関係
),( nmx入力系列 ),( nmy出力系列２次元インパルス応答
),( nmh
∑∑ −−⋅=⊗=
i j
jnimhjixhxnmy ),(),(),(
(2次元システムの例）
</p>
</body>
</slide>
<slide page="38">
<body>
<p>
知的画像処理（２） 38
3.0 2.0
8.0
5.0
0.1
0.1
5.0
3.0
6.0 4.0
6.1
0.1
0.2
0.2
0.1
6.03.0 2.0
8.0
5.0
0.1
0.1
5.0
3.0 0.2
5.0
5.0
0.1
8.0 4.0
2.2
3.1
3.3
3.3
3.1
8.0
0.1
と表される。
],[3],[2],[1
]1,1[2
],1[]1,[],[
212121
21
212121
nnxnnxnnx
nn
nnnnnnx
++=
−−
+−+−=
δ
δδ
と表される。
とするとに対応する出力を入力
],[3],[2],[1],[
3,2,13,2,1
21212121 nnynnynnynny
yyyxxx
++=
0.20.1
0.1
入力系列
1n
2n
3.0 2.0
8.0
5.0
0.1
0.1
5.0
3.0
インパルス応答
1n
2n
],[3 21 nny ],[ 21 nny],[2 21 nny],[1 21 nny
畳込み演算の計算例
</p>
</body>
</slide>
<slide page="39">
<body>
<p>
知的画像処理（２） 39２次元システムの連結(1/2)
),(1 nmh ),(2 nmh ),(0 nmh
),(2),(1),(0 nmhnmhnmh ⊗=
),(1 nmh
),(2 nmh
),(0 nmh
),(2),(1),(0 nmhnmhnmh +=
システムの縦続接続
システムの並列接続
</p>
</body>
</slide>
<slide page="40">
<body>
<p>
知的画像処理（２） 40
m
n
2
3
1
1
2
1h
11 22 3
m
n 2h
),( nmx ),( nmy
m
n
3 2
2
9
6
1
4
1
1
1
22
22
33
3
4
44 6
6 6
2
2
21 hh ⊗
),( nmx ),( nmy
演算の回数は？
２次元システムの連結(2/2)
</p>
</body>
</slide>
<slide page="41">
<body>
<p>
知的画像処理（２） 41
２次元系列のZ変換
は複素変数21
2121
,
),(),(
zz
zznmxzzX
m n
nm∑ ∑∞
−∞=
∞
−∞=
−−=
とする．
変換，フーリエ変換をの２次元系列
ただし，
変換フーリエ変換
畳込み演算
),(),,(
),(
),(),(
),(),(),(),)((),(
21
21
21
,21
21
2121212121
2
2
1
1
ωω
ωω
ωω
jj
ezez
jj
eeXzzX
Znnx
zzXeeX
Z
zzHzzXzzYnnhxnny
jj ===
⇔•
⋅=⇔⊗=
•
Z変換は，フーリエ変換と密接な関係
２次元系列x(m,n)のZ変換
</p>
</body>
</slide>
<slide page="42">
<body>
<p>
知的画像処理（２） 42
２次元システムの特性解析
はの振幅特性と位相特性これより，
は，のフーリエ変換従って，
すると，
と変換をの２次元インパルス応答
),(
),(
),(),(
),(),(
),(),(
),(),(
21
),(
21
,21
21
21
21
212121
2121
21
2
2
1
1
21
1 2
ωω
ωωφ
ωω
ωω
ωω
ωω
jj
j
ezez
jj
jj
nn
n n
eeH
eA
zzHeeH
eeHnnh
zznnhzzH
zzHZnnh
jj
⋅=
=
=
==
−−∞
−∞=
∞
−∞=
∑ ∑
となる．，それぞれ， ),(),( 2121 ωωφωωA
</p>
</body>
</slide>
<slide page="43">
<body>
<p>
知的画像処理（２） 43
２次元システムの例(1/3)
{ }
)1)(1(
1),(
1
2
1
14
1
1
2
1
1
1
2
1
14
1
21
−−
−−−−
++=
+++=
zz
zzzzzzH
これより，
{ })1,1()1,(),1(),(),(
),(:
212121214
1
21
21
−−+−+−+= nnxnnxnnxnnxnny
nnx 力がに対するシステムの出入力入出力関係
),( 21 nnx ),( 21 nny),( 21 nnh
{ }
と表される．
ルス応答は，このシステムのインパ
)1,1()1,(),1(),(),( 212121214121 −−+−+−+= nnnnnnnnnnh δδδδ
),( 21 nnh
2n
1n
0
4
1
4
1
4
1
4
1
</p>
</body>
</slide>
<slide page="44">
<body>
<p>
知的画像処理（２） 44
直線位相位相特性：
振幅特性：従って，
のフーリエ変換は，
LLL)(),(
,
2
cos
2
cos),(
2
cos
2
cos
)1)(1(
)2,1(),(
),(
212
1
21
21
21
221
21
4
1
2,1
21
21
21
21
ωωωωφ
ωωωω
ωω ωω
ωω
ωω
ωω
+−=
⎟⎟⎠
⎞
⎜⎜⎝
⎛
⎟⎟⎠
⎞
⎜⎜⎝
⎛=
⋅⎟⎟⎠
⎞
⎜⎜⎝
⎛
⎟⎟⎠
⎞
⎜⎜⎝
⎛=
++=
=
+−
−−
==
A
e
ee
zzHeeH
nnh
j
jj
ezez
jj
jj
1ω1ω
2ω2ω
位相特性振幅特性
</p>
</body>
</slide>
<slide page="45">
<body>
<p>
知的画像処理（２） 45
),(1 21 nnh
16
1
1n
2n
16
4
16
2
16
1
16
1
16
1
16
2
16
216
2
1n
2n
16
4
16
1
16
1
16
1
16
1
16
2
16
2
16
2
16
2
),(2 21 nnh
)2)(2(),(2
)21)(21(),(1
1
2
1
2
1
1
1
116
1
21
2
2
1
2
2
1
1
116
1
21
−−
−−−−
++++=
++++=
zzzzzzH
zzzzzzH
Z変換は，各インパルス応答の
零位相
ーリエ変換は，各インパルス応答のフ
LL)cos22)(cos22(),(2
)cos22)(cos22(),(1
2116
1
)(
2116
1
21
2121
ωω
ωω
ωω
ωωωω
++=
⋅++= +−
jj
jjj
eeH
eeeH
1ω
2ω
振幅特性
２次元システムの例(2/3)
</p>
</body>
</slide>
<slide page="46">
<body>
<p>
知的画像処理（２） 46
)2(),(2
)2(),(1
1
2
1
221
1
1
1
121
−
−
+−=
+−=
zzzzH
zzzzH
Z変換は，各インパルス応答の
πωω
πωω
ω
ω
jjj
jjj
eeeH
eeeH
⋅⎟⎟⎠
⎞
⎜⎜⎝
⎛=
⋅⎟⎟⎠
⎞
⎜⎜⎝
⎛=
2
sin4),(2
2
sin4),(1
22
12
21
21
ーリエ変換は，各インパルス応答のフ
1n
2n
2−1 1
),(1 21 nnh
1n
2n
2−
1
1
),(2 21 nnh
1ω
1ω
1ω
),(1 21 ωω jj eeH
2ω
2ω
2ω
),(2 21 ωω jj eeH
),(2),(1 2121 ωωωω jjjj eeHeeH ⋅
２次元システムの例(3/3)
</p>
</body>
</slide>
</presentation>
